---
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import BlogCard from '@/components/react/blog-card'
import Skills from '@/components/react/skills'
import { buttonVariants } from '@/components/ui/button'
import Logo from '@/components/ui/logo'
import Layout from '@/layouts/Layout.astro'
import { getRecentPosts } from '@/lib/data-utils'
import { SITE } from '@/consts'

const blog = await getRecentPosts(3)
const currentUrl = Astro.url;
---

<Layout canonicalUrl={currentUrl}>
  <PageHead slot="head" title="Web Developer/Designer" />
  <section class="flex flex-col gap-y-12 px-4 py-8 sm:px-8 lg:px-16">
    <div
      class="flex flex-col items-center text-center sm:flex-row sm:items-start sm:gap-8 sm:text-left"
    >
      <div class="relative overflow-hidden rounded-lg sm:shrink-0 sm:overflow-hidden sm:rounded-lg">
        <Logo
          className="h-auto w-40 object-cover sm:w-48 md:w-56 lg:w-64 "
        />
      </div>
      <div class="mt-8 sm:mt-0 sm:max-w-xl">
        <h1
          class="font-custom text-foreground text-start text-4xl font-extrabold sm:text-5xl"
        >
          {SITE.title}
        </h1>
        <div class="mt-4 flex items-center gap-2" aria-label="location">
          <span
            class="bg-primary text-primary-foreground ring-primary/30 rounded-full px-3 py-1 text-sm font-medium ring-1"
          >
            I'm from
          </span>
          <span class="flex items-center gap-1">
            <span class="text-foreground text-sm font-medium"> {SITE.location}</span>

<svg xmlns="http://www.w3.org/2000/svg"
              viewBox="0 10 75 50"
              class="h-7 w-7 transition-transform duration-500 hover:rotate-12"
              aria-hidden="true"
              role="img"
              focusable="false"
              aria-labelledby="title"></g><g id="SVGRepo_iconCarrier"> <g id="color"> <path fill="#ffffff" d="M67 17H5.31909V54.8044H67V17Z"></path> <g> <path fill="#5c9e31" fill-rule="evenodd" d="M50.9767 40H21.0233C25.4306 39.3639 30.5453 39 36 39C41.4547 39 46.5694 39.3639 50.9767 40Z" clip-rule="evenodd"></path> <path fill="#5c9e31" d="M50.9767 40V41C51.5012 41 51.9366 40.5948 51.9741 40.0716C52.0117 39.5484 51.6387 39.0852 51.1195 39.0103L50.9767 40ZM21.0233 40L20.8805 39.0103C20.3614 39.0852 19.9883 39.5484 20.0259 40.0716C20.0634 40.5948 20.4988 41 21.0233 41V40ZM50.9767 39H21.0233V41H50.9767V39ZM36 38C30.5029 38 25.3401 38.3666 20.8805 39.0103L21.1662 40.9897C25.5212 40.3612 30.5878 40 36 40V38ZM51.1195 39.0103C46.6599 38.3666 41.4972 38 36 38V40C41.4122 40 46.4788 40.3612 50.8339 40.9897L51.1195 39.0103Z"></path> </g> <rect x="5" y="48" width="62" height="7" fill="#EA5A47"></rect> <path fill="#EA5A47" stroke="#EA5A47" stroke-linejoin="round" d="M16.5 23L17.0613 24.7275H18.8776L17.4082 25.7951L17.9695 27.5225L16.5 26.4549L15.0305 27.5225L15.5918 25.7951L14.1224 24.7275H15.9387L16.5 23Z"></path> <path fill="#A57939" stroke="#A57939" stroke-linejoin="round" d="M25.5 32.5L23.5 34L24 34.5L24.8271 34.4503V35.4503C28.4074 35.4503 27.7699 32.8316 30.5 34C30.5 34 29.4151 38.1054 26.9733 38.4315L26.9789 39.0621C28.1505 39.0621 27.3074 39.0403 28.479 39.0403C30.5344 37.752 32.1332 36.5621 33.5 35C34.1926 37.12 36.8577 37.12 35 38.5H36.7574C36.7574 38.5 36.9414 38.3277 37.2588 37.89C37.5762 37.4523 35.962 34.9708 35.962 34.9708C35.962 34.9708 38.5 35.5 39.5 35C38.7039 36.9627 41.4817 38.222 38.5 38.6L39 39H40.5C40.5 39 42.3158 36.7973 42.6319 35.4503C43.1828 38.3454 47.7828 36.6894 45 39H46L47.5 38C45.5794 36 45.9673 28.5227 40.4686 28.5227C37.9686 28.5227 37.5 29 36.5 29C35.5 29 33 28 32 28C31 28 27.8489 29.8594 27.5 30C27.1511 30.1406 26.3271 30.541 26.3271 30.541C25.8271 30.541 24.8271 32.041 24.8271 32.041L25.5 32.5Z"></path> <path fill="none" stroke="#A57939" stroke-linecap="round" stroke-width="3" d="M40.5 44.5H53M19 44.5H35.5"></path> </g> <g id="line"> <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M67 17H5V55H67V17Z"></path> </g> </g></svg>                          
          </span>
        </div>
        <p class="text-md text-foreground mt-4 text-start font-sans" title="description" aria-label="description">
          {SITE.description}
        </p>
      </div>
    </div>

    <section class="relative" aria-labelledby="skills-title">
      <h2
        id="skills-title"
        class="font-custom text-foreground text-2xl font-bold"
        title="skills"
        aria-label="skills"
        role="heading"
      >
        Skills & Technologies
      </h2>
      <p class="text-muted-foreground text-sm" aria-label="skills description">
        Here are some of the technologies I've been working with:
      </p>
      <div>
        <Skills client:load />
      </div>
    </section>

    <section class="flex flex-col gap-y-4" aria-labelledby="latest-posts-title" role="region">
      <div class="relative" aria-labelledby="latest-posts-title">
        <h2
          id="latest-posts-title"
          class="font-custom text-foreground text-2xl font-bold"
          title="latest blog posts"
          aria-label="latest blog posts"
        >
          Latest Blog Posts
        </h2>
        <p class="text-muted-foreground text-sm" aria-label="blog description">
          Here are some of my latest blog posts. You can find more on my blog
          page.
        </p>
      </div>
      <ul class="flex flex-col gap-y-4">
        {
          blog.map((post) => (
            <li>
              <BlogCard entry={post} />
            </li>
          ))
        }
      </ul>
      <div class="flex justify-center" aria-label="see all posts">
        <Link
          href="/blog"
          class={buttonVariants({ variant: 'ghost' }) + ' group'}
        >
          See all posts <span
            class="ml-1.5 transition-transform group-hover:translate-x-1"
            >&rarr;</span
          >
        </Link>
      </div>
    </section>
  </section>
</Layout>
